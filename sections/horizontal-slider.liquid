{% comment %} <link rel="stylesheet" href="{{ 'custom-section.css' | asset_url }}"> {% endcomment %}

<style>
  .custom-section {
    display: flex;
    justify-content: center;
    padding: 20px;
  }

  .custom-wrapper {
    display: flex;
    flex-direction: column;
    max-width: 1200px;
    width: 100%;
  }

  .custom-block {
    display: flex;
    align-items: center;
    margin: 20px 0;
  }

  .text-container {
    flex: 1;
    padding: 20px;
  }

  .image-container {
    flex: 1;
    display: flex;
    justify-content: center;
  }

  .image-container img {
    width: 100%;
    height: auto;
    object-fit: cover;
    border-radius: 10px;
  }

  .description-container {
    flex: 1;
    padding: 20px;
  }
</style>

<div class="custom-section">
  <div class="custom-wrapper">
    {% for block in section.blocks %}
      <div class="custom-block" style="flex-direction: {{ block.settings.layout }}">
        <div class="text-container">
          <h2>{{ block.settings.product.title }}</h2>
        </div>
        <div class="image-container">
          {% if block.settings.custom_image %}
            <img src="{{ block.settings.custom_image | image_url: width: 300, height: 300 }}" alt="{{ block.settings.product.title }}" width="300px" height="300px">
          {% else %}
            <img src="{{ block.settings.product.images[0] | image_url: width: 300, height: 300 }}" alt="{{ block.settings.product.title }}" width="300px" height="300px">
          {% endif %}
        </div>
        <div class="description-container">
          <p>{{ block.settings.product.description }}</p>
        </div>
      </div>
    {% endfor %}
  </div>
</div>

{% schema %}
{
  "name": "Custom Section",
  "settings": [],
  "blocks": [
    {
      "type": "content",
      "name": "Content Block",
      "settings": [
        {
          "type": "product",
          "id": "product",
          "label": "Select Product"
        },
        {
          "type": "image_picker",
          "id": "custom_image",
          "label": "Custom Image (Optional)"
        },
        {
          "type": "select",
          "id": "layout",
          "label": "Layout",
          "options": [
            {
              "value": "row",
              "label": "Default (Text-Image-Description)"
            },
            {
              "value": "row-reverse",
              "label": "Reverse (Description-Image-Text)"
            }
          ]
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Custom Section",
      "category": "Custom"
    }
  ]
}
{% endschema %}
